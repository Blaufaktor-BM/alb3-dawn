{% assign unique_id = 'table-' | append: section.id | append: '-' | append: 'now' | date: "%s" %}
{% if section.settings.th1 != blank or section.settings.th2 != blank or section.settings.th3 != blank or section.settings.th4 != blank %}
  <section id="{{ unique_id }}" class="table-{{ section.id }} page-width" style="padding-left: {{ section.settings.table_padding | default: '40px' }}; padding-right: {{ section.settings.table_padding | default: '40px' }};">
    {% if section.settings.table_heading != blank %}
      <{{ section.settings.heading_tag }} style="font-family: 'Montserrat', sans-serif; font-weight: {{ section.settings.heading_weight }}; font-size: {{ section.settings.heading_size }}; text-align: {{ section.settings.heading_alignment }}; margin-bottom: 20px; color: {{ section.settings.heading_color }};">
        {{ section.settings.table_heading }}
      </{{ section.settings.heading_tag }}>
    {% endif %}
    <table>
      <thead>
        <tr>
          <th>{{ section.settings.th1 }}</th>
          <th class="narrow">{{ section.settings.th2 }}</th>
          {% if section.settings.number_of_columns > 2 %}
            <th>{{ section.settings.th3 }}</th>
          {% endif %}
          {% if section.settings.number_of_columns > 3 %}
            <th>{{ section.settings.th4 }}</th>
          {% endif %}
        </tr>
      </thead>
      <tbody>
        {% if section.blocks.size > 0 %}
          {% for block in section.blocks %}
            <tr>
              <td>{{ block.settings.col1 }}</td>
              <td class="narrow center">{{ block.settings.col2 }}</td>
              {% if section.settings.number_of_columns > 2 %}
                <td>{{ block.settings.col3 }}</td>
              {% endif %}
              {% if section.settings.number_of_columns > 3 %}
                <td>{{ block.settings.col4 }}</td>
              {% endif %}
            </tr>
          {% endfor %}
        {% endif %}
      </tbody>
    </table>
  </section>
  <style>
    #{{ unique_id }} {
      font-family: 'Amsi Light', sans-serif;
      font-size: 13px;
    }
    #{{ unique_id }} a {
      color: #0081be;
    }
    #{{ unique_id }} table {
      width: 100%;
      border-collapse: collapse;
    }
    #{{ unique_id }} thead tr th {
      background: {{ section.settings.color_th_background | default: '#eee' }};
      color: {{ section.settings.color_th_text | default: '#fff' }};
      text-align: left;
      font-family: 'Montserrat', sans-serif;
      font-size: 16px;
      font-weight: 300;
      padding: {{ section.settings.padding_th | default: '10px' }} 0;
      padding-left: {{ section.settings.padding_th | default: '10px' }};
      padding-right: {{ section.settings.padding_th | default: '10px' }};
      border: {{ section.settings.border_width | default: '1px' }} solid {{ section.settings.border_color | default: '#000' }};
    }
    #{{ unique_id }} tbody tr td {
      background: {{ section.settings.color_even | default: '#fff' }};
      color: {{ section.settings.color_even_text | default: '#000' }};
      padding: 0;
      padding-left: {{ section.settings.padding_td | default: '10px' }};
      padding-right: {{ section.settings.padding_td | default: '10px' }};
      border: {{ section.settings.border_width | default: '1px' }} solid {{ section.settings.border_color | default: '#000' }};
    }
    #{{ unique_id }} tbody tr:nth-child(odd) td {
      background: {{ section.settings.color_odd | default: '#fff' }};
      color: {{ section.settings.color_odd_text | default: '#000' }};
    }
    #{{ unique_id }} th.narrow, #{{ unique_id }} td.narrow {
      width: 50px;
    }
    #{{ unique_id }} td.center {
      text-align: center;
    }
  </style>
{% endif %}
{% schema %}
{
  "name": "Table",
  "settings": [
    {
      "type": "text",
      "id": "table_heading",
      "label": "Table Heading"
    },
    {
      "type": "select",
      "id": "heading_tag",
      "label": "Heading Tag",
      "options": [
        {
          "value": "h1",
          "label": "H1"
        },
        {
          "value": "h2",
          "label": "H2"
        },
        {
          "value": "h3",
          "label": "H3"
        },
        {
          "value": "h4",
          "label": "H4"
        },
        {
          "value": "h5",
          "label": "H5"
        },
        {
          "value": "h6",
          "label": "H6"
        }
      ],
      "default": "h2"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "heading_weight",
      "label": "Heading Font Weight",
      "min": 100,
      "max": 900,
      "step": 100,
      "default": 400
    },
    {
      "type": "text",
      "id": "heading_size",
      "label": "Heading Font Size",
      "default": "24px"
    },
    {
      "type": "select",
      "id": "heading_alignment",
      "label": "Heading Alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "text",
      "id": "th1",
      "label": "TH1"
    },
    {
      "type": "text",
      "id": "th2",
      "label": "TH2"
    },
    {
      "type": "text",
      "id": "th3",
      "label": "TH3"
    },
    {
      "type": "text",
      "id": "th4",
      "label": "TH4"
    },
    {
      "type": "select",
      "id": "number_of_columns",
      "label": "Number of Columns",
      "options": [
        {
          "value": "2",
          "label": "2"
        },
        {
          "value": "3",
          "label": "3"
        },
        {
          "value": "4",
          "label": "4"
        }
      ],
      "default": "3"
    },
    {
      "type": "color",
      "id": "color_th",
      "label": "TH color"
    },
    {
      "type": "color",
      "id": "color_th_text",
      "label": "TH text color"
    },
    {
      "type": "color",
      "id": "color_th_background",
      "label": "TH background color"
    },
    {
      "type": "color",
      "id": "color_even",
      "label": "Even row color"
    },
    {
      "type": "color",
      "id": "color_even_text",
      "label": "Even row text color"
    },
    {
      "type": "color",
      "id": "color_odd",
      "label": "Odd row color"
    },
    {
      "type": "color",
      "id": "color_odd_text",
      "label": "Odd row text color"
    },
    {
      "type": "text",
      "id": "padding_th",
      "label": "Header padding",
      "default": "10px"
    },
    {
      "type": "text",
      "id": "padding_td",
      "label": "Cell padding",
      "default": "10px"
    },
    {
      "type": "text",
      "id": "border_width",
      "label": "Border width",
      "default": "1px"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border color",
      "default": "#000"
    },
    {
      "type": "text",
      "id": "table_padding",
      "label": "Table padding",
      "default": "40px"
    }
  ],
  "blocks": [
    {
      "type": "rows",
      "name": "Row",
      "settings": [
        {
          "type": "richtext",
          "id": "col1",
          "label": "Col 1"
        },
        {
          "type": "richtext",
          "id": "col2",
          "label": "Col 2"
        },
        {
          "type": "richtext",
          "id": "col3",
          "label": "Col 3"
        },
        {
          "type": "richtext",
          "id": "col4",
          "label": "Col 4"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Table",
      "blocks": []
    }
  ]
}
{% endschema %}
